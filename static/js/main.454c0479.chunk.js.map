{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Container/Container.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Container/Container.jsx","components/Searchbar/Searchbar.jsx","components/services/apiService.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Loader/Loader.jsx","components/Modal/Modal.jsx","components/ErrorView/ErrorView.jsx","components/Button/Button.jsx","components/ImageGallery/ImageGallery.jsx","App.js","reportWebVitals.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Container","children","className","s","container","Searchbar","state","name","handleSubmit","e","preventDefault","trim","props","onHandleSubmit","setState","toast","error","handleChange","currentTarget","value","onSubmit","this","SearchForm","type","SearchForm__button","SearchForm__buttonLabel","SearchForm__input","autoComplete","autoFocus","onChange","placeholder","Component","api","fetchImages","nextQuery","page","fetch","then","response","ok","json","Promise","reject","Error","ImageGalleryItem","webformatURL","largeImageURL","tags","onOpenModal","src","alt","data-source","ImageGalleryItem__image","onClick","Loader","color","height","width","timeout","modalRoot","document","querySelector","Modal","handleKeyDown","code","onToggleModal","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","ErrorView","message","role","Button","onLoadMore","ImageGallery","images","isLoading","showModal","searchImages","query","apiService","newImages","total","prevState","hits","catch","finally","scrollPage","dataset","source","toggleModal","console","log","setTimeout","scrollBy","top","documentElement","clientHeight","behavior","prevProps","prevQuery","prevPage","nextPage","textError","map","id","length","autoClose","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.454c0479.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1_B5O\",\"ImageGalleryItem__image\":\"ImageGalleryItem_ImageGalleryItem__image__3kDbW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__Tub88\",\"Modal\":\"Modal_Modal__5HMLU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__2QcX8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1VQ80\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1w5hM\"};","import PropTypes from 'prop-types';\nimport s from './Container.module.css';\n\nfunction Container({ children }) {\n  return <div className={s.container}>{children}</div>;\n}\n\nContainer.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Container;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass Searchbar extends Component {\n  state = {\n    name: '',\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    if (this.state.name.trim() === '') {\n      toast.error('Что ищем ?');\n      return;\n    }\n    this.props.onHandleSubmit(this.state.name);\n    // console.log(this.state.name);\n    this.setState({ name: '' });\n  };\n  handleChange = e => {\n    this.setState({ name: e.currentTarget.value });\n  };\n\n  render() {\n    return (\n      <header onSubmit={this.handleSubmit} className={s.Searchbar}>\n        <form className={s.SearchForm}>\n          <button type=\"submit\" className={s.SearchForm__button}>\n            <span className={s.SearchForm__buttonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchForm__input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            value={this.state.name}\n            onChange={this.handleChange}\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onHandleSubmit: PropTypes.func.isRequired,\n  // onSearchQueryChange: PropTypes.func.isRequired,\n  // value: PropTypes.string.isRequired,\n};\n\nexport default Searchbar;\n","function fetchImages(nextQuery, page) {\n  return fetch(\n    `https://pixabay.com/api/?q=${nextQuery}&page=${page}&key=18452046-d075d28130c097165687e8e16&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(new Error('No response from server'));\n  });\n}\n\nconst api = { fetchImages };\n\nexport default api;\n","import PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nexport default function ImageGalleryItem({\n  webformatURL,\n  largeImageURL,\n  tags,\n  onOpenModal,\n}) {\n  return (\n    <li className={s.ImageGalleryItem}>\n      <img\n        src={webformatURL}\n        alt={tags}\n        data-source={largeImageURL}\n        className={s.ImageGalleryItem__image}\n        onClick={onOpenModal}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  largeImageURL: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n  webformatURL: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport Spinner from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nfunction Loader() {\n  return (\n    <Spinner\n      className={Loader}\n      type=\"TailSpin\"\n      color=\"#00BFFF\"\n      height={100}\n      width={100}\n      timeout={3000}\n    />\n  );\n}\n\nexport default Loader;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.css';\n\n\nconst modalRoot = document.querySelector('#modalPortal');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onToggleModal();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onToggleModal();\n    }\n  };\n\n  render() {\n    const { largeImageURL } = this.props;\n\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>\n          <img src={largeImageURL} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  onToggleModal: PropTypes.func.isRequired,\n};\n\nexport default Modal;\n","import PropTypes from 'prop-types';\n\nexport default function ErrorView({ message }) {\n  return (\n    <div role=\"alert\">\n      <p>Sorry, something went wrong. Error: {message}</p>\n    </div>\n  );\n}\n\nErrorView.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nexport default function Button({ onLoadMore }) {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onLoadMore}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onLoadMore: PropTypes.func.isRequired,\n};\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport apiService from '../services/apiService';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport s from './ImageGallery.module.css';\nimport Loader from '../Loader';\nimport Modal from '../Modal';\nimport ErrorView from '../ErrorView';\nimport Button from '../Button';\n\nclass ImageGallery extends Component {\n  state = {\n    images: [],\n    largeImageURL: '',\n    page: 1,\n    error: null,\n    isLoading: false,\n    showModal: false,\n      };\n  static propTypes = {\n    query: PropTypes.string.isRequired,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevProps.query;\n    const nextQuery = this.props.query;\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n    \n    if (prevQuery !== nextQuery) {\n      this.setState({ images: [], page: 1, error: null });\n    }\n\n    if (prevQuery !== nextQuery || prevPage !== nextPage) {\n      this.setState({isLoading:true});\n      this.searchImages();\n    }\n  }\n\n  searchImages = () => {\n    this.setState({ isLoading: true });\n    const nextQuery = this.props.query;\n    const  page  = this.state.page;\n\n    apiService.fetchImages(nextQuery, page)\n    // fetch(\n    //   `https://pixabay.com/api/?q=${nextQuery}&page=${page}&key=18452046-d075d28130c097165687e8e16&image_type=photo&orientation=horizontal&per_page=12`,\n    // )\n     \n      // .then(response => {\n      //   if (response.ok) {\n      //     return response.json();\n      //   }\n      //   return Promise.reject(new Error('Invalid request'));\n      // })\n\n      \n      .then(newImages => {\n        if (newImages.total !== 0) {\n          this.setState(prevState => ({\n            images: [...prevState.images, ...newImages.hits],\n          }));\n        }\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  onLoadMore = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n    this.scrollPage();\n  };\n  onOpenModal = e => {\n    this.setState({ largeImageURL: e.target.dataset.source });\n    this.toggleModal();\n  };\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n    console.log(1);\n  };\n  scrollPage = () => {\n    setTimeout(() => {\n      window.scrollBy({\n        top: document.documentElement.clientHeight - 160,\n        behavior: 'smooth',\n      });\n    }, 500);\n  };\n\n  render() {\n    const { images, error, isLoading, largeImageURL, showModal } = this.state;\n    return (\n      <div>\n        {error && <ErrorView textError={error.message} />}\n\n        {\n          <ul className={s.ImageGallery}>\n            {images.map(\n              ({ id, webformatURL, largeImageURL, tags, onOpenModal }) => (\n                <ImageGalleryItem\n                  key={id}\n                  webformatURL={webformatURL}\n                  largeImageURL={largeImageURL}\n                  tags={tags}\n                  onOpenModal={this.onOpenModal}\n                />\n              ),\n            )}\n          </ul>\n        }\n        {isLoading && <Loader />}\n        {!isLoading && images.length > 0 && (\n          <Button onLoadMore={this.onLoadMore} />\n        )}\n        {showModal && (\n          <Modal\n            onToggleModal={this.toggleModal}\n            largeImageURL={largeImageURL}\n          />\n        )}\n                {<ToastContainer autoClose={3000} />}\n      </div>\n    );\n  }\n}\n\nImageGallery.propTypes = {\n  images: PropTypes.array.isRequired,\n  onOpenModal: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import { Component } from 'react';\n\nimport Container from './components/Container';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\n\nclass App extends Component {\n  state = {\n    query: '',\n   \n  };\n\n  \n\n  handleSubmit = name => {\n    this.setState({ query: name });\n    \n    console.log(name);\n  };\n\n  render() {\n    const {\n      query,\n          } = this.state;\n    return (\n      <Container>\n        <Searchbar onHandleSubmit={this.handleSubmit} />\n\n        <ImageGallery query={query} />\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1r3JS\",\"SearchForm\":\"Searchbar_SearchForm__1hu2k\",\"SearchForm__button\":\"Searchbar_SearchForm__button__35ULD\",\"SearchForm__buttonLabel\":\"Searchbar_SearchForm__buttonLabel__2BcxC\",\"SearchForm__input\":\"Searchbar_SearchForm__input__7m5sG\"};"],"sourceRoot":""}